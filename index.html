<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="styles.css">
		<title>Project 1 - H517 - Spring 2023</title>
	</head>

	<body>

        <div class="master">
            <svg class="map" width="1000" height="1000"></svg>
        </div>
		
	</body>

	<script type="module" src="/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.2/d3.min.js" 
        integrity="sha512-oKI0pS1ut+mxQZdqnD3w9fqArLyILRsT3Dx0B+8RVEXzEk3aNK3J3pWlaGJ8MtTs1oiwyXDAH6hG6jy1sY0YqA==" 
        crossorigin="anonymous" 
        referrerpolicy="no-referrer"></script>

    <script>

		const multiplier = 40;
		const map = d3.select(".map");

        setupStreets();
		setupPumps();

        function setupStreets() {

            d3.json("/data/streets.json").then(data => {

				const g = map.append("g").attr("class", "streets");

				data.map(street => {
					const streetX = street.map(s => (s.x * multiplier));
					const streetY = street.map(s => (s.y * multiplier));
					const line = d3.line()
						.x(d => streetX[d])
						.y(d => streetY[d]);
					g.append("path")
						.datum(d3.range(streetX.length))
						.attr("fill", "none")
						.attr("stroke", "black")
						.attr("d", line);
				});


            });
        
        }

		function setupPumps() {
			d3.csv("/data/pumps.csv").then(data => {
				
				const g = map.append("g").attr("class", "pumps");

				data.map(pump => {
					g.append("circle")
						.attr("cx", pump.x * multiplier)
						.attr("cy", pump.y * multiplier)
						.attr("r", 4)
				});

			})
		}


    </script>

</html>
